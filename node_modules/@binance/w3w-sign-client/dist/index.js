function n(n){if(n===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n}function e(n,e,t,o,r,c,i){try{var u=n[c](i);var s=u.value}catch(n){t(n);return}if(u.done){e(s)}else{Promise.resolve(s).then(o,r)}}function t(n){return function(){var t=this,o=arguments;return new Promise(function(r,c){var i=n.apply(t,o);function u(n){e(i,r,c,u,s,"next",n)}function s(n){e(i,r,c,u,s,"throw",n)}u(undefined)})}}function o(n,e){if(!(n instanceof e)){throw new TypeError("Cannot call a class as a function")}}function r(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||false;o.configurable=true;if("value"in o)o.writable=true;Object.defineProperty(n,o.key,o)}}function c(n,e,t){if(e)r(n.prototype,e);if(t)r(n,t);return n}function i(n){i=Object.setPrototypeOf?Object.getPrototypeOf:function n(n){return n.__proto__||Object.getPrototypeOf(n)};return i(n)}function u(n,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:true,configurable:true}});if(e)a(n,e)}function s(e,t){if(t&&(f(t)==="object"||typeof t==="function")){return t}return n(e)}function a(n,e){a=Object.setPrototypeOf||function n(n,e){n.__proto__=e;return n};return a(n,e)}function f(n){"@swc/helpers - typeof";return n&&typeof Symbol!=="undefined"&&n.constructor===Symbol?"symbol":typeof n}function l(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(n){return false}}function h(n){var e=l();return function t(){var t=i(n),o;if(e){var r=i(this).constructor;o=Reflect.construct(t,arguments,r)}else{o=t.apply(this,arguments)}return s(this,o)}}function p(n,e){var t,o,r,c,i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]};return c={next:u(0),"throw":u(1),"return":u(2)},typeof Symbol==="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(n){return function(e){return s([n,e])}}function s(c){if(t)throw new TypeError("Generator is already executing.");while(i)try{if(t=1,o&&(r=c[0]&2?o["return"]:c[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;if(o=0,r)c=[c[0]&2,r.value];switch(c[0]){case 0:case 1:r=c;break;case 4:i.label++;return{value:c[1],done:false};case 5:i.label++;o=c[1];c=[0];continue;case 7:c=i.ops.pop();i.trys.pop();continue;default:if(!(r=i.trys,r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(c[0]===6&&i.label<r[1]){i.label=r[1];r=c;break}if(r&&i.label<r[2]){i.label=r[2];i.ops.push(c);break}if(r[2])i.ops.pop();i.trys.pop();continue}c=e.call(n,i)}catch(n){c=[6,n];o=0}finally{t=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:true}}}var y=Object.defineProperty;var b=function(n,e,t){return e in n?y(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t};var v=function(n,e,t){return b(n,(typeof e==="undefined"?"undefined":f(e))!="symbol"?e+"":e,t),t};import{Core as d}from"@binance/w3w-core";import{DisconnectType as C}from"@binance/w3w-types";import{Events as w}from"@binance/w3w-utils";var g=function(e){"use strict";u(i,e);var r=h(i);function i(){o(this,i);var e;e=r.call(this);v(n(e),"accounts",[]);v(n(e),"coreConnection");e.register();return e}c(i,[{key:"chainId",get:function n(){return this.coreConnection?this.coreConnection.chainId:"0x0"}},{key:"connected",get:function n(){return this.coreConnection?this.coreConnection.connected:!1}},{key:"connecting",get:function n(){return this.coreConnection?this.coreConnection.pending:!1}},{key:"open",value:function n(n){var e=n.requestChainId,o=n.lng,r=n.showQrCodeModal;var c=this;return t(function(){var n,t;return p(this,function(i){switch(i.label){case 0:if(c.register(),c.coreConnection.connected)return[2];return[4,c.coreConnection.connect({chainId:e,lng:o,showQrCodeModal:r})];case 1:n=i.sent(),t=n.accounts;c.accounts=t;return[2]}})})()}},{key:"request",value:function n(n){var e=this;return t(function(){var t;return p(this,function(o){switch(o.label){case 0:t=e.connected;if(t)return[3,2];return[4,e.open({})];case 1:t=o.sent();o.label=2;case 2:return[2,(t,e.coreConnection.request(n))]}})})()}},{key:"disconnect",value:function n(){this.connected&&(this.coreConnection.killSession(),this.onClose(C.DisconnectAtClient))}},{key:"register",value:function n(){if(this.coreConnection)return this.coreConnection;this.coreConnection=new d,this.accounts=this.coreConnection.accounts,this.subscribeEvents()}},{key:"subscribeEvents",value:function n(){var n=this;this.coreConnection.on("chainChanged",function(e){n.events.emit("chainChanged",e)}),this.coreConnection.on("accountsChanged",function(e){n.accounts=e,n.events.emit("accountsChanged",e)}),this.coreConnection.on("uri_ready",function(e){n.events.emit("uri_ready",e)}),this.coreConnection.on("disconnect",function(e){n.onClose(e)})}},{key:"onClose",value:function n(n){this.coreConnection=null,this.events.emit("disconnect",n)}}]);return i}(w);export{g as SignClient};//# sourceMappingURL=index.js.map