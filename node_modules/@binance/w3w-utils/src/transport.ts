import { isInBinance } from './env'

declare global {
  interface Window {
    ethereum: any
  }
}

export const bnTransport = ({ custom, http }) => {
  if (isInBinance()) {
    return custom({
      async request({ method, params }) {
        console.log('ðŸš€ ~~ request ~~ method:', method)
        try {
          const response = await window.ethereum.request({ method, params })
          console.log('ðŸš€ ~~ custom ~~ response:', response)
          return response
        } catch (error) {
          console.log('ðŸš€ ~~ request ~~ error:', error)
        }
      },
    })
  }
  return http()
}
