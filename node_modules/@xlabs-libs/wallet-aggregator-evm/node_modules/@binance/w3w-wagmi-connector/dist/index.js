function e(e,n){if(n==null||n>e.length)n=e.length;for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function n(e){if(Array.isArray(e))return e}function t(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function r(e,n,t,r,o,i,a){try{var c=e[i](a);var u=c.value}catch(e){t(e);return}if(c.done){n(u)}else{Promise.resolve(u).then(r,o)}}function o(e){return function(){var n=this,t=arguments;return new Promise(function(o,i){var a=e.apply(n,t);function c(e){r(a,o,i,c,u,"next",e)}function u(e){r(a,o,i,c,u,"throw",e)}c(undefined)})}}function i(e,n){if(!(e instanceof n)){throw new TypeError("Cannot call a class as a function")}}function a(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function c(e,n,t){if(n)a(e.prototype,n);if(t)a(e,t);return e}function u(e,n,t){if(n in e){Object.defineProperty(e,n,{value:t,enumerable:true,configurable:true,writable:true})}else{e[n]=t}return e}function s(e){s=Object.setPrototypeOf?Object.getPrototypeOf:function e(e){return e.__proto__||Object.getPrototypeOf(e)};return s(e)}function l(e,n){if(typeof n!=="function"&&n!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:true,configurable:true}});if(n)m(e,n)}function f(e,n){if(n!=null&&typeof Symbol!=="undefined"&&n[Symbol.hasInstance]){return!!n[Symbol.hasInstance](e)}else{return e instanceof n}}function d(e,n){var t=e==null?null:typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(t==null)return;var r=[];var o=true;var i=false;var a,c;try{for(t=t.call(e);!(o=(a=t.next()).done);o=true){r.push(a.value);if(n&&r.length===n)break}}catch(e){i=true;c=e}finally{try{if(!o&&t["return"]!=null)t["return"]()}finally{if(i)throw c}}return r}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};var r=Object.keys(t);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))}r.forEach(function(n){u(e,n,t[n])})}return e}function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);if(n){r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})}t.push.apply(t,r)}return t}function y(e,n){n=n!=null?n:{};if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(n))}else{v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(e,n){if(n&&(w(n)==="object"||typeof n==="function")){return n}return t(e)}function m(e,n){m=Object.setPrototypeOf||function e(e,n){e.__proto__=n;return e};return m(e,n)}function g(e,t){return n(e)||d(e,t)||O(e,t)||h()}function w(e){"@swc/helpers - typeof";return e&&typeof Symbol!=="undefined"&&e.constructor===Symbol?"symbol":typeof e}function O(n,t){if(!n)return;if(typeof n==="string")return e(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor)r=n.constructor.name;if(r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(n,t)}function C(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function P(e){var n=C();return function t(){var t=s(e),r;if(n){var o=s(this).constructor;r=Reflect.construct(t,arguments,o)}else{r=t.apply(this,arguments)}return b(this,r)}}function j(e,n){var t,r,o,i,a={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),"throw":c(1),"return":c(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(n){return u([e,n])}}function u(i){if(t)throw new TypeError("Generator is already executing.");while(a)try{if(t=1,r&&(o=i[0]&2?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;if(r=0,o)i=[i[0]&2,o.value];switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:false};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){a=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(i[0]===6&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}if(o[2])a.ops.pop();a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e];r=0}finally{t=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}}var I=Object.defineProperty;var S=function(e,n,t){return n in e?I(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t};var k=function(e,n,t){return S(e,(typeof n==="undefined"?"undefined":w(n))!="symbol"?n+"":n,t),t},E=function(e,n,t){if(!n.has(e))throw TypeError("Cannot "+t)};var A=function(e,n,t){return E(e,n,"read from private field"),t?t.call(e):n.get(e)},W=function(e,n,t){if(n.has(e))throw TypeError("Cannot add the same private member more than once");f(n,WeakSet)?n.add(e):n.set(e,t)},x=function(e,n,t,r){return E(e,n,"write to private field"),r?r.call(e,t):n.set(e,t),t};import{isInBinance as T,log as _,normalizeChainId as D}from"@binance/w3w-utils";import{UserRejectedRequestError as R,createWalletClient as U,getAddress as B,custom as q,numberToHex as L,SwitchChainError as M}from"viem";import{Connector as z}from"wagmi";import{InjectedConnector as H}from"wagmi/connectors/injected";var G,$,F,J=function(e){"use strict";l(r,e);var n=P(r);function r(e){i(this,r);var a;var c,u;a=n.call(this,p({options:{}},e));k(t(a),"id","BinanceW3W");k(t(a),"name","BinanceW3W");k(t(a),"ready",!0);W(t(a),G,void 0);W(t(a),$,void 0);W(t(a),F,void 0);var s=t(a);k(t(a),"connect",o(function(){var e,n,t,r,o,i,a,c,u,l,f,d,h,p,v,y;var b=arguments;return j(this,function(m){switch(m.label){case 0:e=b.length>0&&b[0]!==void 0?b[0]:{chainId:A(s,$)},n=e.chainId;n=(t=n!==null&&n!==void 0?n:A(s,$))!==null&&t!==void 0?t:56,_.debug("\uD83D\uDE80 ~ connect ~ chainId:",n);m.label=1;case 1:m.trys.push([1,5,,6]);r=n;if(!r){;l=(u=s.storage)===null||u===void 0?void 0:(c=u.getItem("store"))===null||c===void 0?void 0:(a=c.state)===null||a===void 0?void 0:(i=a.data)===null||i===void 0?void 0:(o=i.chain)===null||o===void 0?void 0:o.id;l&&!s.isChainUnsupported(l)&&(r=l)}return[4,s.getProvider({chainId:r,create:!0})];case 2:f=m.sent();f.on("accountsChanged",s.onAccountsChanged),f.on("chainChanged",s.onChainChanged),f.on("disconnect",s.onDisconnect),setTimeout(function(){return s.emit("message",{type:"connecting"})},0),f.setLng(A(s,F));return[4,f.enable()];case 3:d=m.sent(),h=B(d[0]);return[4,s.getChainId()];case 4:p=m.sent(),v=s.isChainUnsupported(p);return[2,{account:h,chain:{id:p,unsupported:v}}];case 5:y=m.sent();throw y.code===100001?new R(y):y;case 6:return[2]}})}));k(t(a),"onAccountsChanged",function(e){e.length===0?a.emit("disconnect"):a.emit("change",{account:B(e[0])})});k(t(a),"onChainChanged",function(e){var n=D(e),t=a.isChainUnsupported(n);a.emit("change",{chain:{id:n,unsupported:t}})});k(t(a),"onDisconnect",function(){a.emit("disconnect")});x(t(a),$,(e===null||e===void 0?void 0:(c=e.options)===null||c===void 0?void 0:c.chainId)||56),x(t(a),F,(e===null||e===void 0?void 0:(u=e.options)===null||u===void 0?void 0:u.lng)||"en");return a}c(r,[{key:"disconnect",value:function e(){var e=this;return o(function(){var n;return j(this,function(t){switch(t.label){case 0:return[4,e.getProvider()];case 1:n=t.sent();n.disconnect(),n.removeListener("accountsChanged",e.onAccountsChanged),n.removeListener("chainChanged",e.onChainChanged),n.removeListener("disconnect",e.onDisconnect),(typeof localStorage==="undefined"?"undefined":w(localStorage))<"u"&&localStorage.removeItem("walletconnect");return[2]}})})()}},{key:"getAccount",value:function e(){var e=this;return o(function(){var n;return j(this,function(t){switch(t.label){case 0:return[4,e.getProvider()];case 1:n=t.sent().accounts;return[2,B(n[0])]}})})()}},{key:"getChainId",value:function e(){var e=this;return o(function(){var n;return j(this,function(t){switch(t.label){case 0:return[4,e.getProvider()];case 1:n=t.sent();return[2,D(n.chainId)]}})})()}},{key:"getProvider",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.chainId,t=e.create;var r=this;return o(function(){var e,o,i,a;return j(this,function(c){switch(c.label){case 0:if(!(!A(r,G)||n||t))return[3,2];i=((e=r.options)===null||e===void 0?void 0:e.infuraId)?{}:r.chains.reduce(function(e,n){return y(p({},e),u({},n.id,n.rpcUrls.default.http[0]))},{});return[4,import("@binance/w3w-ethereum-provider")];case 1:a=c.sent().default;x(r,G,new a(y(p({},r.options),{chainId:n,rpc:p({},i,(o=r.options)===null||o===void 0?void 0:o.rpc)})));c.label=2;case 2:return[2,A(r,G)]}})})()}},{key:"getWalletClient",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.chainId;var t=this;return o(function(){var e,r,o,i;return j(this,function(a){switch(a.label){case 0:return[4,Promise.all([t.getProvider({chainId:n}),t.getAccount()])];case 1:e=g.apply(void 0,[a.sent(),2]),r=e[0],o=e[1],i=t.chains.find(function(e){return e.id===n});if(!r)throw new Error("provider is required.");return[2,U({account:o,chain:i,transport:q(r)})]}})})()}},{key:"isAuthorized",value:function e(){var e=this;return o(function(){var n;return j(this,function(t){switch(t.label){case 0:t.trys.push([0,2,,3]);return[4,e.getAccount()];case 1:return[2,!!t.sent()];case 2:n=t.sent();return[2,!1];case 3:return[2]}})})()}},{key:"switchChain",value:function e(e){var n=this;return o(function(){var t,r,o,i,a;return j(this,function(c){switch(c.label){case 0:return[4,n.getProvider()];case 1:t=c.sent(),r=L(e);c.label=2;case 2:c.trys.push([2,4,,5]);return[4,Promise.race([t.request({method:"wallet_switchEthereumChain",params:[{chainId:r}]}),new Promise(function(t){return n.on("change",function(n){var r=n.chain;(r===null||r===void 0?void 0:r.id)===e&&t(e)})})])];case 3:return[2,(c.sent(),(o=n.chains.find(function(n){return n.id===e}))!==null&&o!==void 0?o:{id:e,name:"Chain ".concat(r),network:"".concat(r),nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpcUrls:{default:{http:[""]},public:{http:[""]}}})];case 4:i=c.sent();a=typeof i=="string"?i:i===null||i===void 0?void 0:i.message;throw/user rejected request/i.test(a)?new R(i):new M(i);case 5:return[2]}})})()}}]);return r}(z);G=new WeakMap,$=new WeakMap,F=new WeakMap;var K=function(){return T()?H:J};export{K as getWagmiConnector};//# sourceMappingURL=index.js.map