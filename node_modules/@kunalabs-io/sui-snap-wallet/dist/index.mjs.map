{"version":3,"sources":["../src/index.ts","../src/icon.ts","../src/errors.ts"],"sourcesContent":["import {\n  ReadonlyWalletAccount,\n  SUI_CHAINS,\n  StandardConnectFeature,\n  StandardConnectMethod,\n  StandardDisconnectFeature,\n  StandardDisconnectMethod,\n  StandardEventsFeature,\n  SuiFeatures,\n  SuiSignAndExecuteTransactionBlockMethod,\n  SuiSignAndExecuteTransactionBlockOutput,\n  SuiSignMessageInput,\n  SuiSignMessageMethod,\n  SuiSignMessageOutput,\n  SuiSignPersonalMessageInput,\n  SuiSignPersonalMessageMethod,\n  SuiSignPersonalMessageOutput,\n  SuiSignTransactionBlockInput,\n  SuiSignTransactionBlockMethod,\n  SuiSignTransactionBlockOutput,\n  Wallet,\n  WalletAccount,\n  getWallets,\n} from '@mysten/wallet-standard'\nimport { ICON } from './icon'\nimport { BaseProvider } from '@metamask/providers'\nimport {\n  SerializedAdminSetFullnodeUrl,\n  SerializedWalletAccount,\n  StoredState,\n  deserializeWalletAccount,\n  serializeSuiSignAndExecuteTransactionBlockInput,\n  serializeSuiSignMessageInput,\n  serializeSuiSignTransactionBlockInput,\n} from './types'\nimport { convertError } from './errors'\n\nexport * from './types'\nexport * from './errors'\n\nexport const SNAP_ORIGIN = 'npm:@kunalabs-io/sui-metamask-snap'\nexport const SNAP_VERSION = '^1.0.0'\n\nexport function registerSuiSnapWallet(): SuiSnapWallet {\n  const wallets = getWallets()\n  for (const wallet of wallets.get()) {\n    if (wallet.name === SuiSnapWallet.NAME) {\n      console.warn('SuiSnapWallet already registered')\n      return wallet as SuiSnapWallet\n    }\n  }\n\n  const wallet = new SuiSnapWallet()\n  wallets.register(wallet)\n  return wallet\n}\n\nexport async function getAccounts(provider: BaseProvider): Promise<ReadonlyWalletAccount[]> {\n  const res = (await provider.request({\n    method: 'wallet_invokeSnap',\n    params: {\n      snapId: SNAP_ORIGIN,\n      request: {\n        method: 'getAccounts',\n      },\n    },\n  })) as [SerializedWalletAccount]\n\n  return res.map(acc => new ReadonlyWalletAccount(deserializeWalletAccount(acc)))\n}\n\nexport async function admin_getStoredState(provider: BaseProvider) {\n  const res = (await provider.request({\n    method: 'wallet_invokeSnap',\n    params: {\n      snapId: SNAP_ORIGIN,\n      request: {\n        method: 'admin_getStoredState',\n      },\n    },\n  })) as StoredState\n\n  return res\n}\n\nexport async function admin_setFullnodeUrl(\n  provider: BaseProvider,\n  network: 'mainnet' | 'testnet' | 'devnet' | 'localnet',\n  url: string\n) {\n  const params: SerializedAdminSetFullnodeUrl = {\n    network,\n    url,\n  }\n  await provider.request({\n    method: 'wallet_invokeSnap',\n    params: {\n      snapId: SNAP_ORIGIN,\n      request: {\n        method: 'admin_setFullnodeUrl',\n        params: JSON.parse(JSON.stringify(params)),\n      },\n    },\n  })\n}\n\nexport async function signPersonalMessage(\n  provider: BaseProvider,\n  messageInput: SuiSignPersonalMessageInput\n): Promise<SuiSignPersonalMessageOutput> {\n  const serialized = serializeSuiSignMessageInput(messageInput)\n\n  try {\n    return (await provider.request({\n      method: 'wallet_invokeSnap',\n      params: {\n        snapId: SNAP_ORIGIN,\n        request: {\n          method: 'signPersonalMessage',\n          params: JSON.parse(JSON.stringify(serialized)),\n        },\n      },\n    })) as SuiSignPersonalMessageOutput\n  } catch (e) {\n    throw convertError(e)\n  }\n}\n\nexport async function signMessage(\n  provider: BaseProvider,\n  messageInput: SuiSignMessageInput\n): Promise<SuiSignMessageOutput> {\n  const res = await signPersonalMessage(provider, messageInput)\n\n  return {\n    messageBytes: res.bytes,\n    signature: res.signature,\n  }\n}\n\nexport async function signTransactionBlock(\n  provider: BaseProvider,\n  transactionInput: SuiSignTransactionBlockInput\n): Promise<SuiSignTransactionBlockOutput> {\n  const serialized = serializeSuiSignTransactionBlockInput(transactionInput)\n\n  try {\n    return (await provider.request({\n      method: 'wallet_invokeSnap',\n      params: {\n        snapId: SNAP_ORIGIN,\n        request: {\n          method: 'signTransactionBlock',\n          params: JSON.parse(JSON.stringify(serialized)),\n        },\n      },\n    })) as SuiSignTransactionBlockOutput\n  } catch (e) {\n    throw convertError(e)\n  }\n}\n\nexport async function signAndExecuteTransactionBlock(\n  provider: BaseProvider,\n  transactionInput: SuiSignTransactionBlockInput\n): Promise<SuiSignAndExecuteTransactionBlockOutput> {\n  const serialized = serializeSuiSignAndExecuteTransactionBlockInput(transactionInput)\n\n  try {\n    return (await provider.request({\n      method: 'wallet_invokeSnap',\n      params: {\n        snapId: SNAP_ORIGIN,\n        request: {\n          method: 'signAndExecuteTransactionBlock',\n          params: JSON.parse(JSON.stringify(serialized)),\n        },\n      },\n    })) as SuiSignAndExecuteTransactionBlockOutput\n  } catch (e) {\n    throw convertError(e)\n  }\n}\n\nexport interface MetaMaskStatus {\n  available: boolean\n  version?: string\n  supportsSnaps: boolean\n  suiSnapInstalled: boolean\n}\n\nexport async function metaMaskAvailable(): Promise<MetaMaskStatus> {\n  const provider = window.ethereum\n  if (!provider) {\n    return {\n      available: false,\n      supportsSnaps: false,\n      suiSnapInstalled: false,\n    }\n  }\n  if (!provider.isMetaMask) {\n    return {\n      available: false,\n      suiSnapInstalled: false,\n      supportsSnaps: false,\n    }\n  }\n  try {\n    const version = await provider.request<string>({ method: 'web3_clientVersion' })\n    const snaps = await provider.request<Record<string, unknown>>({ method: 'wallet_getSnaps' })\n    const suiSnapInstalled = !!snaps && 'npm:@kunalabs-io/sui-metamask-snap' in snaps\n\n    return {\n      available: true,\n      version: version!,\n      supportsSnaps: true,\n      suiSnapInstalled,\n    }\n  } catch (e) {\n    console.warn(e)\n    return {\n      available: true,\n      supportsSnaps: false,\n      suiSnapInstalled: false,\n    }\n  }\n}\n\nexport class SuiSnapWallet implements Wallet {\n  static NAME = 'Sui MetaMask Snap'\n  #connecting: boolean\n  #connected: boolean\n\n  #accounts: WalletAccount[] | null = null\n\n  constructor() {\n    this.#connecting = false\n    this.#connected = false\n  }\n\n  get version() {\n    return '1.0.0' as const\n  }\n\n  get name() {\n    return SuiSnapWallet.NAME\n  }\n\n  get icon() {\n    return ICON\n  }\n\n  get chains() {\n    return SUI_CHAINS\n  }\n\n  get connecting() {\n    return this.#connecting\n  }\n\n  get accounts() {\n    if (this.#connected && this.#accounts) {\n      return this.#accounts\n    } else {\n      return []\n    }\n  }\n\n  get features(): StandardConnectFeature &\n    StandardDisconnectFeature &\n    SuiFeatures &\n    StandardEventsFeature {\n    return {\n      'standard:connect': {\n        version: '1.0.0',\n        connect: this.#connect,\n      },\n      'standard:disconnect': {\n        version: '1.0.0',\n        disconnect: this.#disconnect,\n      },\n      'sui:signPersonalMessage': {\n        version: '1.0.0',\n        signPersonalMessage: this.#signPersonalMessage,\n      },\n      'sui:signMessage': {\n        version: '1.0.0',\n        signMessage: this.#signMessage,\n      },\n      'sui:signTransactionBlock': {\n        version: '1.0.0',\n        signTransactionBlock: this.#signTransactionBlock,\n      },\n      'sui:signAndExecuteTransactionBlock': {\n        version: '1.0.0',\n        signAndExecuteTransactionBlock: this.#signAndExecuteTransactionBlock,\n      },\n      'standard:events': {\n        version: '1.0.0',\n        on: () => {\n          return () => {}\n        },\n      },\n    }\n  }\n\n  #connect: StandardConnectMethod = async () => {\n    if (this.#connecting) {\n      throw new Error('Already connecting')\n    }\n\n    this.#connecting = true\n    this.#connected = false\n\n    try {\n      const provider = window.ethereum\n      const mmStatus = await metaMaskAvailable()\n      if (!mmStatus.available) {\n        throw new Error('MetaMask not detected!')\n      }\n\n      await provider.request({\n        method: 'wallet_requestSnaps',\n        params: {\n          [SNAP_ORIGIN]: {\n            version: SNAP_VERSION,\n          },\n        },\n      })\n\n      this.#accounts = await getAccounts(provider)\n\n      this.#connecting = false\n      this.#connected = true\n\n      return {\n        accounts: this.accounts,\n      }\n    } catch (e) {\n      this.#connecting = false\n      this.#connected = false\n      throw e\n    }\n  }\n\n  #disconnect: StandardDisconnectMethod = async () => {\n    this.#connecting = false\n    this.#connected = false\n    this.#accounts = null\n  }\n\n  #signPersonalMessage: SuiSignPersonalMessageMethod = async messageInput =>\n    signPersonalMessage(window.ethereum, messageInput)\n\n  #signMessage: SuiSignMessageMethod = async messageInput =>\n    signMessage(window.ethereum, messageInput)\n\n  #signTransactionBlock: SuiSignTransactionBlockMethod = async transactionInput =>\n    signTransactionBlock(window.ethereum, transactionInput)\n\n  #signAndExecuteTransactionBlock: SuiSignAndExecuteTransactionBlockMethod =\n    async transactionInput => signAndExecuteTransactionBlock(window.ethereum, transactionInput)\n}\n","export const ICON: `data:image/svg+xml;base64,${string}` =\n  'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGlkPSJMYXllcl8xIiB4PSIwIiB5PSIwIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAzMTguNiAzMTguNiI+CiAgPHN0eWxlPgogICAgLnN0MSwuc3Q2e2ZpbGw6I2U0NzYxYjtzdHJva2U6I2U0NzYxYjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmR9LnN0NntmaWxsOiNmNjg1MWI7c3Ryb2tlOiNmNjg1MWJ9CiAgPC9zdHlsZT4KICA8cGF0aCBmaWxsPSIjZTI3NjFiIiBzdHJva2U9IiNlMjc2MWIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTI3NC4xIDM1LjUtOTkuNSA3My45TDE5MyA2NS44eiIvPgogIDxwYXRoIGQ9Im00NC40IDM1LjUgOTguNyA3NC42LTE3LjUtNDQuM3ptMTkzLjkgMTcxLjMtMjYuNSA0MC42IDU2LjcgMTUuNiAxNi4zLTU1LjN6bS0yMDQuNC45TDUwLjEgMjYzbDU2LjctMTUuNi0yNi41LTQwLjZ6IiBjbGFzcz0ic3QxIi8+CiAgPHBhdGggZD0ibTEwMy42IDEzOC4yLTE1LjggMjMuOSA1Ni4zIDIuNS0yLTYwLjV6bTExMS4zIDAtMzktMzQuOC0xLjMgNjEuMiA1Ni4yLTIuNXpNMTA2LjggMjQ3LjRsMzMuOC0xNi41LTI5LjItMjIuOHptNzEuMS0xNi41IDMzLjkgMTYuNS00LjctMzkuM3oiIGNsYXNzPSJzdDEiLz4KICA8cGF0aCBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTIxMS44IDI0Ny40LTMzLjktMTYuNSAyLjcgMjIuMS0uMyA5LjN6bS0xMDUgMCAzMS41IDE0LjktLjItOS4zIDIuNS0yMi4xeiIvPgogIDxwYXRoIGZpbGw9IiMyMzM0NDciIHN0cm9rZT0iIzIzMzQ0NyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJtMTM4LjggMTkzLjUtMjguMi04LjMgMTkuOS05LjF6bTQwLjkgMCA4LjMtMTcuNCAyMCA5LjF6Ii8+CiAgPHBhdGggZmlsbD0iI2NkNjExNiIgc3Ryb2tlPSIjY2Q2MTE2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Im0xMDYuOCAyNDcuNCA0LjgtNDAuNi0zMS4zLjl6TTIwNyAyMDYuOGw0LjggNDAuNiAyNi41LTM5Ljd6bTIzLjgtNDQuNy01Ni4yIDIuNSA1LjIgMjguOSA4LjMtMTcuNCAyMCA5LjF6bS0xMjAuMiAyMy4xIDIwLTkuMSA4LjIgMTcuNCA1LjMtMjguOS01Ni4zLTIuNXoiLz4KICA8cGF0aCBmaWxsPSIjZTQ3NTFmIiBzdHJva2U9IiNlNDc1MWYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTg3LjggMTYyLjEgMjMuNiA0Ni0uOC0yMi45em0xMjAuMyAyMy4xLTEgMjIuOSAyMy43LTQ2em0tNjQtMjAuNi01LjMgMjguOSA2LjYgMzQuMSAxLjUtNDQuOXptMzAuNSAwLTIuNyAxOCAxLjIgNDUgNi43LTM0LjF6Ii8+CiAgPHBhdGggZD0ibTE3OS44IDE5My41LTYuNyAzNC4xIDQuOCAzLjMgMjkuMi0yMi44IDEtMjIuOXptLTY5LjItOC4zLjggMjIuOSAyOS4yIDIyLjggNC44LTMuMy02LjYtMzQuMXoiIGNsYXNzPSJzdDYiLz4KICA8cGF0aCBmaWxsPSIjYzBhZDllIiBzdHJva2U9IiNjMGFkOWUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTE4MC4zIDI2Mi4zLjMtOS4zLTIuNS0yLjJoLTM3LjdsLTIuMyAyLjIuMiA5LjMtMzEuNS0xNC45IDExIDkgMjIuMyAxNS41aDM4LjNsMjIuNC0xNS41IDExLTl6Ii8+CiAgPHBhdGggZmlsbD0iIzE2MTYxNiIgc3Ryb2tlPSIjMTYxNjE2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Im0xNzcuOSAyMzAuOS00LjgtMy4zaC0yNy43bC00LjggMy4zLTIuNSAyMi4xIDIuMy0yLjJoMzcuN2wyLjUgMi4yeiIvPgogIDxwYXRoIGZpbGw9IiM3NjNkMTYiIHN0cm9rZT0iIzc2M2QxNiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJtMjc4LjMgMTE0LjIgOC41LTQwLjgtMTIuNy0zNy45LTk2LjIgNzEuNCAzNyAzMS4zIDUyLjMgMTUuMyAxMS42LTEzLjUtNS0zLjYgOC03LjMtNi4yLTQuOCA4LTYuMXpNMzEuOCA3My40bDguNSA0MC44LTUuNCA0IDggNi4xLTYuMSA0LjggOCA3LjMtNSAzLjYgMTEuNSAxMy41IDUyLjMtMTUuMyAzNy0zMS4zLTk2LjItNzEuNHoiLz4KICA8cGF0aCBkPSJtMjY3LjIgMTUzLjUtNTIuMy0xNS4zIDE1LjkgMjMuOS0yMy43IDQ2IDMxLjItLjRoNDYuNXptLTE2My42LTE1LjMtNTIuMyAxNS4zLTE3LjQgNTQuMmg0Ni40bDMxLjEuNC0yMy42LTQ2em03MSAyNi40IDMuMy01Ny43IDE1LjItNDEuMWgtNjcuNWwxNSA0MS4xIDMuNSA1Ny43IDEuMiAxOC4yLjEgNDQuOGgyNy43bC4yLTQ0Ljh6IiBjbGFzcz0ic3Q2Ii8+Cjwvc3ZnPg=='\n","export class InvalidParamsError extends Error {\n  static readonly type = 'INVALID_REQUEST_PARAMS'\n  readonly type = InvalidParamsError.type\n\n  constructor(message: string) {\n    super(`${InvalidParamsError.type}: ${message}}`)\n  }\n\n  static asSimpleError(message: string) {\n    return new Error(`${InvalidParamsError.type}: ${message}`)\n  }\n\n  static isSimpleErrorMessage(message: string) {\n    return message.startsWith(InvalidParamsError.type + ': ')\n  }\n\n  static fromSimpleErrorMessage(message: string) {\n    return new InvalidParamsError(message.slice(InvalidParamsError.type.length + 2))\n  }\n}\n\nexport class UserRejectionError extends Error {\n  static readonly type = 'USER_REJECTION'\n  readonly type = UserRejectionError.type\n\n  constructor() {\n    super(UserRejectionError.type)\n  }\n\n  static asSimpleError() {\n    return new Error(UserRejectionError.type)\n  }\n\n  static isSimpleErrorMessage(message: string) {\n    return message === UserRejectionError.type\n  }\n}\n\nexport class InvalidRequestMethodError extends Error {\n  static readonly type = 'INVALID_REQUEST_METHOD'\n  readonly type = InvalidRequestMethodError.type\n\n  constructor(method: string) {\n    super(`${InvalidRequestMethodError.type}: ${method}`)\n  }\n\n  static asSimpleError(method: string) {\n    return new Error(`${InvalidRequestMethodError.type}: ${method}`)\n  }\n\n  static isSimpleErrorMessage(message: string) {\n    return message.startsWith(InvalidRequestMethodError.type + ': ')\n  }\n\n  static fromSimpleErrorMessage(message: string) {\n    return new InvalidRequestMethodError(message.slice(InvalidRequestMethodError.type.length + 2))\n  }\n}\n\nexport class DryRunFailedError extends Error {\n  static readonly type = 'DRY_RUN_FAILED'\n  readonly type = DryRunFailedError.type\n\n  constructor(message?: string) {\n    let msg = DryRunFailedError.type\n    if (message) {\n      msg += ': ' + message\n    }\n    super(msg)\n  }\n\n  static asSimpleError(message?: string) {\n    let msg = DryRunFailedError.type\n    if (message) {\n      msg += ': ' + message\n    }\n    return new Error(msg)\n  }\n\n  static isSimpleErrorMessage(message: string) {\n    return message.startsWith(DryRunFailedError.type)\n  }\n\n  static fromSimpleErrorMessage(message: string) {\n    return new DryRunFailedError(message.slice(DryRunFailedError.type.length + 2))\n  }\n}\n\nexport class NonAdminOrigin extends Error {\n  static readonly type = 'NON_ADMIN_ORIGIN'\n  readonly type = UserRejectionError.type\n\n  constructor() {\n    super(NonAdminOrigin.type)\n  }\n\n  static asSimpleError() {\n    return new Error(NonAdminOrigin.type)\n  }\n\n  static isSimpleErrorMessage(message: string) {\n    return message === NonAdminOrigin.type\n  }\n}\n\nfunction isMetaMaskError(obj: unknown): obj is { message: string } {\n  return typeof obj === 'object' && obj !== null && 'message' in obj\n}\n\nexport function convertError(error: unknown) {\n  if (!isMetaMaskError(error)) {\n    return error\n  }\n\n  if (InvalidParamsError.isSimpleErrorMessage(error.message)) {\n    return InvalidParamsError.fromSimpleErrorMessage(error.message)\n  } else if (UserRejectionError.isSimpleErrorMessage(error.message)) {\n    return new UserRejectionError()\n  } else if (InvalidRequestMethodError.isSimpleErrorMessage(error.message)) {\n    return InvalidRequestMethodError.fromSimpleErrorMessage(error.message)\n  } else if (DryRunFailedError.isSimpleErrorMessage(error.message)) {\n    return DryRunFailedError.fromSimpleErrorMessage(error.message)\n  } else if (NonAdminOrigin.isSimpleErrorMessage(error.message)) {\n    return new NonAdminOrigin()\n  }\n\n  return error\n}\n"],"mappings":"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","names":["wallet"]}